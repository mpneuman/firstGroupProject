<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title> Moody Weather</title>

  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

</head>

<body>


  <div class="container">
    <div class="jumbotron">
      <h1 class="text-center">Moody Weather</h1>

    </div>
  </div>


  <div class="container">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h3 class="panel-title">Search Field</h3>
      </div>
      <div class="panel-body">
        <div class="search-container">
          <form action="/action_page.php">
            <label for="weatherInput"></label>
            <input type="text" id="weatherInput" placeholder="Search.." name="search">
            <button type="submit" id="submitBtn">Submit</button>
            </form>
        </div>
      </div>
    </div>
    </div>




    <div class="container">
      <div class="panel panel-primary">
        <div class="panel-heading">Results</div>
        <div class="panel-body">
          <div class="container-fluid">
            <h1>Search results</h1>
            <div class="row">
              <div class="col-lg-3" id="weatherView" style="background-color:yellow;">
              </div>
              <div class="col-lg-6" id="tempView" style="background-color:grey;">
              </div>
              <div class="col-lg-3" id="movieLog"style="background-color:green;">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>

$("#submitBtn").on("click", function(event){

event.preventDefault();

var city = $("#weatherInput").val();  
var queryURL = "http://api.wunderground.com/api/397251ff2fe9bd69/conditions/q/"+city+".json";
var tempf =['current_observation'];
var weatherView= $("#weatherView");
var weatherData = $("#weatherView").val();
var queryURL2= "http://www.omdbapi.com/?i=tt3896198&s="+weatherData+"&apikey=869ed286";

$.ajax({
url: queryURL,
method: "GET"
}).done(function(response) {
  var typeOfWeather = JSON.stringify(response.current_observation.weather);
  weatherView.text(JSON.stringify(typeOfWeather));
  $("#tempView").text(JSON.stringify(response.current_observation.temp_f));
console.log(response);
console.log(response.current_observation.temp_f);



$.ajax({
    url: queryURL2,
    method: "GET"
    }).then(function(response) {
      console.log(response);
      $("#weatherInput").text(JSON.stringify(response));
      // $("#movieLog").text(JSON.stringify(response.Title + response.Rated));
      console.log(weatherData);
      console.log(queryURL2)

      var movieDiv = $("<div class='movie'>")
      var title = response.Title;
      var titleDOM = $("<p>").text("Title: " + title);
      movieDiv.append(titleDOM);
      
      var rating = response.Rated;
      var ratingDOM = $("<p>").text("Rating: " +rating);

      var imgURL =response.Poster;
      var poster = $("<img>").attr("src", imgURL);

      movieDiv.append(poster);

      $("#movieLog").prepend(movieDiv);

    });

})

// var weatherData = $("#weatherView").val();
// var queryURL2= "http://www.omdbapi.com/?i=tt3896198&s="+weatherData+"&apikey=869ed286";

// $.ajax({
//     url: queryURL2,
//     method: "GET"
//     }).done(function(response) {
//       console.log(response);
//       $("#weatherInput").text(JSON.stringify(response));
//       $("#movieLog").text(JSON.stringify(response));
//       console.log(weatherData);
//     });

// console.log(queryURL2);
})
</script>

</body>
</html>